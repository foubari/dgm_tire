model:
  type: gmrf_mvae
  num_components: 5
  latent_dim: 4                # ICTAI exact: 4
  nf: 32                       # ICTAI exact: 32
  nf_max_e: 512                # ICTAI exact: encoder max filters
  nf_max_d: 256                # ICTAI exact: decoder max filters (different from encoder!)
  hidden_dim: 128              # ICTAI exact: 128
  n_layers: 2                  # ICTAI exact: 2
  beta: 1.0                    # ICTAI exact: 1.0
  diagonal_transf: 'softplus'  # ICTAI exact: softplus transformation
  reduced_diag: false          # ICTAI exact: full diagonal
data:
  root_dir: data/epure
  condition_csv: data/epure/performances.csv
  component_dirs:
  - group_nc
  - group_km
  - bt
  - fpu
  - tpc
  condition_columns:
  - width_px
  - height_px
  prefix_column: matching
  filename_pattern: 'mdbk_{prefix}_{component}.png'
  split_column: train
  normalized: true
training:
  epochs: 500
  batch_size: 32               # ICTAI original: 32 (was 128!)
  num_workers: 4
  lr: 0.0005
  check_every: 100
  seed: 42

  # Loss configuration (ICTAI alignment)
  recon_loss: 'split_l1_mse'   # ICTAI original formula
  alpha_mse: 0.5
  recon_weights: [0.5, 0.5, 1, 0.5, 1]  # EPURE 5 components (no 'gi')

  # NOTE: Progressive masking NOT used for GMRF-MVAE (removed)

  eval_every: 100
paths:
  output_dir: outputs/gmrf_mvae/
  samples_dir: samples/gmrf_mvae/
sampling:
  num_samples: 1000
  batch_sz: 64
  mode: conditional
