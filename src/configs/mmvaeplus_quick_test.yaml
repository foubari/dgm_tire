# Quick test configuration for MMVAE+ (reduced epochs for fast testing)

model:
  type: 'mmvaeplus'
  variant: 'mmvaeplus'
  latent_dim_w: 4      # Private latent dimension
  latent_dim_z: 4      # Shared latent dimension
  latent_dim_u: 8      # Combined (w + z)
  nf: 40                # Number of filters in ResNet
  nf_max: 128           # Max filters
  cond_dim: 2           # Conditioning dimension (width_px, height_px)
  priorposterior: 'Laplace'  # 'Normal' or 'Laplace'
  image_size: [64, 32]  # [Height, Width]
  channels: 1           # Grayscale

data:
  root_dir: 'data/epure'
  component_dirs: ['group_nc', 'group_km', 'bt', 'fpu', 'tpc']
  condition_csv: 'data/epure/performances.csv'
  condition_columns: ['width_px', 'height_px']
  prefix_column: 'matching'
  filename_pattern: 'mdbk_{prefix}_{component}.png'
  split_column: 'train'
  normalized: true

training:
  batch_size: 32        # Reduced for quick testing
  epochs: 5             # Reduced for quick testing
  lr: 0.001
  optimizer: 'adam'
  amsgrad: true
  beta: 2.5             # KL weight
  K: 1                  # Samples for reparameterization
  objective: 'elbo'      # 'elbo' or 'dreg'
  llik_scaling: 0.0
  eval_every: 1         # Evaluate every epoch
  checkpoint_epochs: [5]  # Save checkpoints frequently
  num_workers: 0        # Windows compatibility
  seed: 42
  device: 'cuda'

sampling:
  unconditional:
    n_samples: 16       # Reduced for quick testing
    batch_size: 8

  conditional:
    components: ['fpu']  # Components to condition on
    batch_size: 4
    max_batches: 5  # Limit number of batches for quick testing

paths:
  output_dir: 'outputs/mmvaeplus'
  samples_dir: 'samples/mmvaeplus'

