# Quick test configuration for GMRF MVAE with TOY dataset

model:
  type: gmrf_mvae
  num_components: 3
  latent_dim: 4              # ICTAI alignment (scaled for toy): 16 -> 4
  nf: 32                     # ICTAI alignment: 64 -> 32
  nf_max: 512                # For backward compatibility (use_resnet=False)
  nf_max_e: 512              # Encoder max filters (ResNet mode)
  nf_max_d: 256              # Decoder max filters (ResNet mode)
  hidden_dim: 128            # ICTAI alignment: 256 -> 128
  n_layers: 2
  beta: 1.0                  # Already aligned
  diagonal_transf: 'softplus'  # For ResNet mode
  cond_dim: 2
  dropout_p: 0.0             # ICTAI original: no dropout
  use_resnet: false          # TEST: false first to verify backward compatibility

data:
  root_dir: "data/toy_epure"
  condition_csv: "data/toy_epure/performances.csv"
  component_dirs: ["group_nc", "group_km", "fpu"]
  condition_columns: ["d_cons_norm", "d_rigid_norm", "d_life_norm", "d_stab_norm"]
  prefix_column: "matching"
  filename_pattern: "{prefix}_{component}.png"
  split_column: "train"
  normalized: true

training:
  epochs: 2
  batch_size: 32
  num_workers: 0
  lr: 0.0005
  eval_every: 1
  check_every: 1
  seed: 42

  # Loss configuration (not used yet with use_resnet=false)
  recon_loss: 'mse'          # Will change to 'split_l1_mse' after testing
  alpha_mse: 0.5
  recon_weights: null        # Will add [0.5, 0.5, 1] after testing

paths:
  output_dir: "outputs/gmrf_mvae_toy/"
  samples_dir: "samples/gmrf_mvae_toy/"

sampling:
  num_samples: 16
  batch_sz: 8
  mode: conditional
